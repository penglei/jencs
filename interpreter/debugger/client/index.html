<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>clearsivler debugger</title>
    </head>
    <body>
        <div id="container">
            <button id="resume" class="break-button">Resume</button>
            <button id="step-over" class="break-button">step over</button>
            <button id="step-into" class="break-button">step into</button>
            <button id="step-out" class="break-button">step out</button>
        </div>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            var end_closed = false;
            var seq = 0;//每个请求给一个续号(续号需要实现有效期)
            document.getElementById("step-over").addEventListener("click", function(evt){
                if (!end_closed) {
                    socket.emit("stepover", {
                        "seq": seq,
                        "type": "request"
                    });
                }
            }, false);

            var socket = io.connect('http://localhost', {
                    'reconnect': false
            });

            socket.on("connect", function(){
                console.log("debugger connect>>>");
            });

            socket.on("files", function(){
            });

            socket.on('next', function(data){
                    console.log(data);
                    seq++;
            });
            socket.on('disconnect', function(){
                end_closed = true;
                console.log('<< remote execute end');
            });
        </script>
    </body>

</html>
